FormatVersion: OOS-2019-06-01
Description: Starts an ECS instance.
Parameters:
  instanceId:
    Description: The ID of ECS instance.
    Type: String
Tasks:
- Name: startInstance
  Action: ACS::ExecuteAPI
  Description: Starts an ECS instance.
  Properties:
    Service: ECS
    API: StartInstance
    Parameters:
      InstanceId: '{{ instanceId }}'
- Name: untilInstanceReady
  Action: ACS::WaitFor
  Description: Waits for the ECS instance to enter running status.
  Properties:
    Service: ECS
    API: DescribeInstances
    Parameters:
      InstanceIds:
      - '{{ instanceId }}'
    DesiredValues:
    - Running
    PropertySelector: Instances.Instance[].Status
